# coder| 极客时间学习笔记

- [jike/已完结的课程 - OneManager](https://d.shikey.com/jike/%E5%B7%B2%E5%AE%8C%E7%BB%93%E7%9A%84%E8%AF%BE%E7%A8%8B/)

## 支付系统

<https://www.pingxx.com/platform>

非业务: 性能 可靠性 易用性 可扩展性 可伸缩性
对外单边账, 对内复式记账
柔性事物处理: 消息机制实现跨系统事务处理, 避免数据库锁导致的性能问题
绑卡: 统一四要素
drools 规则引擎
同步返回: 当做接口调用成功处理, 不能当做支付成功处理(请求/支付 做了异步处理)
三户模型: 客户(自然人/法人) 用户(登录凭证/个人信息) 账户(支付账户)
存在的问题是，它隐藏了数据库的实现细节，这导致在大数据场景下开发人员很难对数据库访问进行优化，而这却是互联网应用开发的重点
康威定律: 公司的组织结构由公司的沟通方式决定
RPC vs HTTP: 确定边界, 边界内使用 RPC, 边界外使用 HTTP

将交易记录写入流程与支付关键路径解耦合能优化提升支付的效率和体验

http 协议交互定义
日志系统
监控系统

## 支持海量数据存储、高性能、高可靠、查询灵活的交易数据存储系统

基于分布式kv存储平台tssd
根节点 -> 分档, 瓶颈 20w 用户 -> root: 时间分片 -> node: value
交易记录带上时间属性
数据记录链式结构: 新 -> 旧
分类和统计功能是用户查询交易记录的一个基本需求: 按月统计, 老数据缓存
历史数据问题
数据异常问题: 全链路排队机制 -> 单用户请求每一层都落到指定服务器和进程
节假日效应: 柔性策略 -> 超过阀值请求先落磁盘缓存起来; 只针对红包
数据安全: 反问控制(请求票据/服务器白名单); 数据脱敏加密; 人员制度规范(权限管理/记录操作流水)

FEED日志: 埋点/数据上报 -> push vs pull
HybridDB - OSS - PG: 共用 OSS 作为存储

算法交易的核心问题是在冲击成本与等待风险之间进行平衡

微服务: trace monitor log

MNK，Mininal Necessary Knowledge
是什么 怎么用 适合哪些场景 有哪些弊端 周围生态如何 替代性技术有哪些 他人的应用总结 动手
40%~50%产品的最终体验应由开发人员决定的。

## 10x程序员工作法

程序员解决的问题, 大多不是程序问题: 本质复杂度+偶然复杂度(人月神话) -> 减少偶然复杂度引发的问题 -> 思考框架: 遇到问时梳理自己真正要做的事情 -> 以终为始 任务分解 沟通反馈 自动化; 能力强vs不会工作

## 研发效率破局之道

研发效能 = 团队能够持续地为用户产生有效价值的效率 = 有效性（Effectiveness）*效率（Efficiency）* 可持续（Sustainability）
软件开发的灵活性决定了研发效能提升的困难性

- 研发效能
  - 不要阻塞开发人员
    - 本地构建脚本的运行速度要足够快
    - 商用软件的采购
  - 参考传统制造行业的经验来提高效能
- 研发流程
- 工程方法
- 个人效能
- 管理+文化

## 邱岳产品实战

和自己较劲, 是一个产品的实战历程; 法无定法, 然后知非法法也
坚韧的力量; 要建立更长的预期, 用对未来的信心支撑对现在的耐心; 我们去做产品, 不能只有理想思考和分析, 更要有策略迭代和实战, 既要胸怀远大也要心狠手辣

如何验证产品创意

- 大量收集信息: 创意vs执行; 上下(上下游, 来源渠道, 消费者)左右(广义竞品 行业环境)+古今中外
- 高效收集和获取信息: 体系化课程 跟行业专家深入交流 读书 财报/券商分析报告/行业分析报告 行业资讯/文章/论坛
如何锤炼产品创意
- 行业未来会是什么样子: 数据+观察+理解+拆解/逻辑推演
- 行业痛点和机会在哪里: 大而化之的宏观判断+个人假设->赌
- 为什么你能做成, 你打算怎么做: 独特优势和路径->大而化之的策略vs详细解决方案/产品特性
- 给直觉一个机会vs冲动
要不要相信调查问卷
- 之前 清单+计划; 保证用户可以流畅的回答问题; 中 尽量少提假设性问题; 不要套路你的用户; 跳出调查问卷
用最少的资源给产品试水
- MVP, minimum viable product: 不断用尽可能少的投入创造尽可能多的价值
- 未完成的功能键
- 一个失败的案例: 询问使用者->客气导致误判->直到刚需产生
- MVP 商业化验证作用: 盖茨忽悠IBM然后修改DOS Dropbox纸片视频
如何快速利用MVP思想
- 提前推演逻辑, 不要盲目验证(打点收集数据进行验证); 验证长板而非短板(第一版12306的长板->它有票); 创造性的低成本方案(人工 第三方 利用规则缩小场景)
- 另一面: 缺少规划 再次唤醒用户更难
如何做好产品立项
- kickoff 项目立项阶段
- 识别相关方, 理解产品对业务的影响; 明确需求, 联合利益; 估算代价, 安排计划(谁做谁估 多估几次 留足余量); 时刻->锁定资源, 「卖」创意
产品发布的坑
- 发布checklist: 该知道的人都知道了吗 脑子里排练过么 万一出意外有退路么
产品增长
- 增长越来越难->红利期结束; 增长新趋势->跑马圈地 拉新->精细化+扩宽战场(三四线下沉 东南亚非洲 新平台新形态押注)
产品增长核心
- 持续而有效的解决一方/多方利益相关者的问题, 为他们创造价值; 是爱创造了增长, 而不是增长创造了爱; 增长要回到产品本身
- 创造产品的啊哈时刻: 不同层面组合信息->帮助用户最大程度的提高资讯阅读效率
- 观察用户如何描述你的产品: 很可能你最终会做出一个跟初衷完全不同的产品形态
增长团队
- 经典结构和搭建逻辑: 用户从进入产品直到最后离开->增长本身需要策略贯穿始终; 独立团队/产品团队增加增长岗位
- 增长实践: 角色->增长策略; 协调增长策略的规划和产品规划(功能增加/用户体验); 一定要有实权负责人全力支持/参与
- <https://medium.com/swlh/how-do-you-choose-the-best-growth-team-model-632ad5a85be9>
产品增长业务公式和指标
- AARRR 漏斗, acquisition 获取, activation 激活, retention 留存, revenue 变现, referral 传播; 不要试图兼顾所有环节
- RARRA 留存-激活-传播-变现-获客: 先把东西做好, 然后扩大影响
- 留存是最重要的指标
- 选定目标: 选定一定时间段内相对稳定的目标, 能够从源头为各种策略的优先级做好划分; 选对方向vs选对时机
- 拆解业务公式: `收入=付费用户数*客单价 付费用户数=用户数*付费转化率 收入=新用户数(流量*注册转化)*新用户转化率*新购客单价+老用户述*复购率*复购客单价`
- 选定支点: 给我一个支点 它能否有效的承前启后的拉动整个业务公式 宏观核心目标/云因策略落地->随业务/市场环境/团队变化调整
产品增长过程中关键套路
- 不能关注具体操作层面的技巧, 而应多关注过程: 建立数据体系 → 分析 → 提出想法 → 排定优先级 → 测试 -> 周而复始
- 使用自有打点策略和日志工具进行复杂分析 > 使用第三方工具进行自定义打点与复杂分析 > 使用自有打点策略进行简单分析 > 使用第三方工具的基本功能进行简单分析。
- 优先从代价小的开始: 快速建立整个闭环 成功时更容易获得信心
实战增长
- 每次开五枪中一枪->加快开火频率; 提高尝试的成功率/准确率/效率; 希望通过个人经验避开错误提高效率; 专业人士->可能并不在与快而在于准; 设计方案的时候要带着下线的准备->向最好的结果努力, 往最坏的情况打算
增长执行
- 自愈力 动态完善策略的重要战术素养: 去寻找那些拥有自愈能力的人, 然后将资源向他倾斜并适当施加压力; 发布早, 迭代快, 脸皮厚, 能稳定节奏
- 决断力: 敢于拿主意 决策得快vs决策得好
- <https://medium.com/@wooyi/7-lessons-from-jeff-bezos-annual-letters-to-shareholders-d2b795201c16>
钩子与用户留存
- 留存本质: 没把留存做好之前, 不应该着急做其他阶段的事情; 留存不是单纯的追求数值指标, 而是不断夯实它背后的驱动力; 钩子->拉回用户不知节制的怪圈->体面一点/个性化一点的由头
- 留存周期与分析: 不同产品应当有不同的时间框架不要一概而论; 对留存有足够长时间的观察; 分析原则是尽可能细分分析
- 方法: 会员特权吸引留存; 直接利益吸引(游戏类似设计); 产品本身包含留存特性(功能本身 数据沉淀 网络效应); 有节奏的持续迭代
传播获客的正确姿势
- 产品本身缺乏生命力, 那无论是病毒传播还是分销裂变, 都难以保持长久
- 传播与获客的关系 获客的原则 流量品类/利润品类 吸引的效率
- 传播类型: 直接推荐 潜移默化推荐
- 动机与设计: 核心功能是否对用户有价值, 能够成功向用户植入品牌印象; 向领域专家求助(使用障碍); 成就用户而不是凸显自己
增长黑客阴暗面
- 保持克制: 产品中的黑暗模式 剧场效应 热力学第二定律
- 朝着用户利益努力: 不蒙骗不恐吓不嘲笑
- 我们应当对那些病毒传播和爆炸式增长保持警惕, 对以刷屏增粉为目标的神奇增长手段保持冷静. 而关注那些真正能够给用户带来价值, 让他们心甘情愿变现和传播的特性
突发性流量数据暴跌:
- 分析: 有没有业务变化/发布; 排除技术故障可能性(系统故障 环境故障); 流量降低的案发现场; 数据变化的渠道特征(web流量->直接流量/SE/引荐)
- 拆解: 新老用户 不同行为模式的用户(流量而非用户量) 业务有关数据因果 其他不可抗因素
- 处理: 分析邮件(发生了什么事/结论/原因, 数据分析过程, 思考和建议); 数据分析要形成结论; 进行必要的有效沟通; 要有应对策略
具体数据辅助决策
- 通过数据了解用户是谁; 通过数据了解用户需求(搜索记录 假设反对意见 抽样用户轨迹); 提供什么解决方案(竞争现状 触达效率); 做出决定, 开工干活
尽信数不如无数
- 数据的骗局(别拿相关当因果) 不要去预设你的期望 数据不是唯一驱动力 数据不是终点
基本商业概念
- 利润=收入-支出(成本/费用 固定支出/浮动支出) 单元交易 毛利=收入(单次收入*交易次数)-浮动成本
提高商业产品收入
- 定价空间 定价和成本无关 定价时尽可能留出一定空间 定价vs直觉拍脑袋; 扩展空间 TAM, total addressable market
- 大部分扩展情况下, 只能在速度/扩张成本/获客质量之间选两个 扩展成本的线性和非线性 寻找扩张中的机会
烧钱获客
- critical mass临界质量; BEP 盈亏平衡点; 尝试观察/分析别人的商业产品->创造机会和负责人聊天->在自己产品中多尝试, 并追踪和积累数据
- 获客成本和流量 CAC TAC; 获客收益 LTV, 让更多人付钱, 并且持续的付钱->付款安全感, 功能支持免费试用, 足够吸引力, 支付和体验捆绑足够紧密 首充/复购
赚钱意识和能力
- 逻辑与计算: 任何一个决定的来龙去脉, 受到的限制和带来的影响; 降价促销->盈亏点
- 不确定性与意志: 手上的资源是筹码->赌, 判断和取舍->最终盈利; 战略上谨慎细致深入的思考, 战术上尽可能凶狠执行到位
- 微妙的时机 平衡的艺术
小程序
- 现状: 超级app+小程序模式 降低多段开发成本; 价值: 体验/用户归属不同
- 传播: 分布式入口 怎样让传播自然而然
- 设计原则: 碎片化/场景化/简单化 从传播出去设计功能; 风险与边界: 坚决和黄赌毒划清界限 尽量杜绝诱导分享 虚拟商品支付政策限制 被抄袭; 期待: 用完即走 当喧闹过去, 任何一个渠道, 最终都会回归理性, 回归用户价值

千万级用户产品如何打造

- 真正的难点其实并不在于想到, 而是选择(特性/时机); 每天和各种限制打交道(改变不了的, 只能接受, 与之共存)
- 极客时间: 通识教育vs职场教育; 招聘->闭环
时刻时间产品规划
- 领域垂直用户群少->github官方数据, 编程教育普及->假设30%年增长
- 优势: 积累大量专题资源; 积累大量高端技术人员和KOL(key option leader); 线上+线下运营能力
- 用户量和收入更多取决于内容质量: 口语化 场景化 交付
- 产品验证: 打造IT知识技能图谱->技能树+学习路径
推动团队
- 不要让你的队友失败
需求评审
- 产品逻辑不一致: UI vs 后端业务逻辑 -> 真正需要平衡的是产品的实现效果/交互的优化/功能改进等与技术实现难度上的平衡
- 产品成败: 各种环境变量 掌舵人的价值选择与世界观
- 技术问题最优解 vs 现实问题当前解
- 强需求/弱需求/伪需求 用户需求/产品创造需求
- 件件有着落, 事事有回音
一次简洁并有效的产品分析
- 产品分析->理解学习和启发 竞品分析->对抗/共存
- 主流程走一遍, 形成产品信息架构->解决谁的什么问题, 切中哪些场景->会有什么方案来解决, 会有什么差异->哪里自己没想到的, 哪些策略和设计可以记录下来->竞品的定位和资源差距->竞品用户/客户的流入流出及口碑, 各条产品线, 运营成本->坚持自己
分享有赏->关键决策
- 找到需要重点关注的用户; MVP 快速试错; 内容为王; 一切就绪, 全力以赴
数据分析验证新功能效果
- 内力->强动力高效的自传播; 外力->持续有节奏的推广; 分享返现+限时优惠
新用户转化为忠实长期用户
- 蹦失: 了解 行动(精简 门槛后移 设计好新用户引导) 打动
产品面试
- 答案都不重要, 重要的是你的思路和表达; 一定不要试图伪装自己; 面试答得好vs成为优秀的产品经理; 见识/思路清楚
职业发展阶段
- 交付特性, 把交代的功能点做好-> 交付业务目标 -> 交付战略
基本数据能力和意识
- 数据是PM最忠实的伙伴: 养成数据走查习惯(第三方工具->宏观指标, 日活/用户新增/留存等 收入/总收入/总订单数); 建立数据体系(咬牙坚持过前期); 数据仪表盘
极客时间获客与传播
- 持续增强产品的核心功能, 为用户创造更多价值: 丰富内容, 构建IT知识图谱; 强调知识交付, 提升产品价值(交付感 品控手册); 重心促活提升粘性
流量平台->资源匮乏平台
- 规模不同->质量要求/谨慎程度差异->产品的流量结构也完全不同; 客观业务差异vs主管感受落差; 职业素养
收集数据前后
- 开始前: 用数据论证和预演目标; 开始埋头产品的时候很容易陷入细节, 可以随时回头来看看这些数据
- 开始后: 纵向(产品内部)横向(竞品/渠道)的标杆数据
- <http://iamsujie.com/8000/8018/>
大众通用型vs受众小垂直领域
- 如果BAT也做和你一样的事情: 不屑做 不擅长 等不及; 希望->大公司做平台型, 小公司做更垂直和更具体的事情
- 具体的力量 算法的力量(数据量适中/数据非标/动态性强) 渠道的力量 创业团队/巨头/巨头里的小团队
未来产品发展趋势
- 用户品味上升 为版权付费 知识教育付费
上手体验app
- 用例: 用户+动作+流程->价值; 信息架构: 概念实体+结构关系+设计; 交互/UI: 内容生产消费; 运营增长: 获客/激活/留存/传播+网络效应+团建/运营成本
- 商业策略: 收费模式+成本/利润+定价+市场规模; 其他: 风险+多端+团队+竞品; 应该深度长期地试着去体验一些应用
app信息架构
- 文字专栏 视频课程 社群 音频 个人中心
专栏销量过万

## 邱岳产品手记

产品经理的世界没有对错只有成败
产品才是唯一名片
专栏: 交谈的窗口 求知的窗口 vs 教程 知识
产品经理的基本功 实战素养 产品观点和思考 产品案例分析

验证码:

- 不要把责任推卸给用户 方案选择的平衡 验证码的进化
工具指南:
- 纸笔+scanner; 原型工具 axure/keynote/omniGraffle/sketch/墨刀/POP; 思维导图 mindmannager/mindnode/xmind; UML startUML/Visio/LucidChart/ProcessOn
关于需求变更:
- 唯一不变的, 就是变化本身; 拥抱变化
- 需求不会变更, 变更的是实现; 挖掘需求背后的需求; 给需求分析留出时间; 需求评审
- 「具体」的力量; 变更时机的选择; 让团队能消化需求变更;
产品被人抄了:
- 世界上只有2种产品, 一种没人用, 一种被人抄
- 摆正心态, 泰然处之 -> 别担心, 抄不走的是气质 -> 不要将产品的护城河建在脸上 -> 做有积累效应的事情 -> 有条不紊, 不要情绪化处理
如何借鉴灵魂:
- the early bird catches the worm, but the second mouse gets the cheese.
- 不要像素级抄袭; 脑子里带着自己的问题; 追本溯源, 知其所以然; 跨领域跨行业借鉴; 致敬与付费
产品规划:
- in preparing for battle i have always found that plans are useless, but planning is indispensable; no battle plan ever survives contact with the enemy
- 自下而上vs自上而下; 产品规划<>功能发布计划; 更宏观的视角和判断vs具体的项目和特性列表; 很难给出准确的时间点
- 留白; 定期回顾和更新产品规划; 产品规划到项目交付的节奏感;
AI时代的产品经理:
- 唯一能持久的竞争优势是胜过竞争对手的学习能力; 纸上得来终觉浅
- 需要学算法 -> 从视频开始 -> 从网上文章抓出关键领域 -> 写写程序找找感觉
- 产品和算法的结合粒度要小 -> 要重视工程的力量 -> 利用产品最大化算法和工程产出结果 -> 做好数据规划 -> 去完美主义理解算法的不确定性
在内部产品中找到产品经理的价值:
- 心事浩茫连广宇, 于无声处听惊雷
- 内部产品: CRM ERP CMS
- 用户离你很近: 资源显性化 项目流程化 用户研究的最佳试验场
- 不要成为功能经理, 化被动为主动: 跳过方案, 寻找背后的动机和诉求; 统一战线, 成本收益一致; 发挥强项, 用技术帮助业务
产品经理获取非权力性影响力:
- 何况异形体, 信任为股肱
- 建立信任是个长期的过程; 如何试错; 要重视承诺, 不要找借口
与开发打交道:
- 横看成岭侧成峰; 兄弟睨于墙, 外御其务
- 为什么vs怎么做; 甲方乙方(邮件签字画押 开小会); 加强沟通互通有无; 专程交代业务规划和产品价值; 掌握技术概念和技术语言
- 合作共赢: 全流程参与; 多听工程师的意见; 不要强迫工程师做评估; 背黑锅与争取利益; 互背KPI, 同仇敌忾; 建立良好个人关系
基本功: 图文
- 没有内容的形式和没有形式的内容, 都是不能存在的; 即使存在的话, 那么, 前者有如奇形怪状的空洞的器皿, 后者则是虽然大家看得见但不认为是实体的空中楼阁
- BDR 商业需求文档 MRD 市场需求文档 PRD 产品需求文档 UC 用例文档 FSD 详细功能说明 产品原型/交互稿
- 如何写一份交互说明文档: <http://heidixie.lofter.com/post/b8226_168d4b5>
基本功: 产品用例
- 世间无限丹青手, 一片伤心画不成
- 概念模型图 流程图/泳道图/时序图 状态图 用例图
产品世界的暗黑模式: 操纵的诱惑
- 卑鄙是卑鄙者的通行证
- <https://darkpatterns.org/>: 操纵来自于基因 尊重和磊落的用户感知价值低 不成熟的劣币驱逐良币
写好产品文档的诀窍:
- 产品文档是产品经理交出的第一个产品
- 明确受众/目的/形式; 知其所以然, 然后知其然; 打造良好的阅读体验->金字塔原理/逻辑/格式; 厚->薄
产品分析的套路
- 自小秦楼望巧, 吴机回锦, 歌舞为谁; 能帮助我们完成进步的, 恰恰是人类的天性本身; 知到蓬莱难再访, 问何方法得长生; 不是在测试你, 而是你在测试我们
- 谁是利益相关者: 利益相关者, 不只用户;toB toC 的不同决策方式; 上下游特点和平台价值
- 解决什么问题: 重视解决的问题而不是解决方案; 把自己放进场景吃自己的狗粮; 转益多师, 加深对场景的理解
- 如何出解决方案: 解决方案是一个产品设计者最终输出的东西; 大量把玩各种互联网产品和服务; 方案和手段上的创新并不多, 真正困难的是挑选和平衡; 利用其他手段, 比如财务(闪电退款); 游戏把很多人性的东西利用得很好
排定需求优先级:
- 一朝需求不称意, 口里驱蛩心上蚝; 民为贵, 社稷次之, 君为轻, 是故得乎丘民而为天子, 得乎天子为诸侯, 得乎诸侯为大夫;
- 避免毫无价值的正确; 规模(Total Addressable market, 趋势, 地域)/频率/强度->排定优先级
- 价值曲线分析: 罗列利益相关者和他们的感知价值; 对问题进行优先级排序; 将问题指标化并拆解; 整体权衡和排序; 综合考虑解决方案
需求评审:
- 问渠那得清如许; 预则立, 不预则废
- 讨论什么: 需求收集和分析; 不同利益方博弈; 项目落地实施的计划管理
- 受众/目的: 需求方利益方->对需求的理解和分析; 研发团队->需求背景; 需求方->产品解决方案; 哪些人->业务->方案
- 控场: 当心知识诅咒(知道一个知识后很难想象不知道这种知识的情况) 不要强迫要吸引 用自己的态度感染别人 不要为了赢而争吵 小公司->频繁沟通
关于产品经理的12个问题:
- 有AI背景的PM: 有过产品成果; 分析别人做过的产品; 介绍学到的知识与方法
鸡汤:
- 取一利生一弊深思熟虑抗住诋毁; 没有任何一个抉择是生死抉择; 什么都不做, 或许已经跑赢了大盘; 平淡无奇, 十之八九; 坚持执行, 不要绣花; 多喝热水
项目管理心得:
- 将者, 智信仁勇严也.
- 影响力>权利; 管人>管事; 交付>计划; 正确看待项目管理工具; 稳住才是赢
从游戏中学习产品设计:
- 玩游戏, 就是自愿尝试克服种种不必要的障碍; 要保持淡定, 就算输掉了比赛, 还有人生
- 游戏设计手段: 持续实时的反馈; 人性的开关; 与社群建立联系; 构建意义
- 游戏机制为核心的启发: 那些精巧的处心积虑的功能性设计, 远不如关键性的机制设计来得重要有效
你的快乐是哪一种:
- 外在奖励vs内在奖励; 不吝给予克制索取

案例分析 Trigraphy

- 利用设计, 来管理用户对于进度的认知; 如何将2个不同的页面更顺滑的连接起来; 通过一个随机效果设计去区分不同级别的用户
案例分析 Guardian
- 卡片设计 文章中的扩展阅读 手势导航设计
案例分析 hopper:
- 产品是需求的灵魂, 我们需要让产品和功能贴着需求与场景长出来
案例分析 labRdr:
- 从用户场景出发, 贴着场景设计产品; 用户收集数据的透明化处理; 产品和用户的每一次互动, 其实都是一次交易
Mimo & learn py
- mimo: 题目设置->简单编程基础; 答题反馈设置; 成就体系
- learn py: 利用社交的方式增加用户粘性
WWF together: 情怀设计
- 用动效传递暗示; 望向镜头的眼睛; 沉浸式交互; 引入深思的传播和分享
Fabulous:
- Material Design; 藏在姓名中的细节; 循序渐进的引导; 替用户负责人
PathSource:
- 导航的迷茫; 视频的直观渲染
Quartz:
- 聊天式界面的黏着力; 模拟人类的对话感; 建立在对话模式上的小说阅读; 对话式交互使用->在一些需要跟用户循序渐进交互的过程中使用这种方式
Google Primer:
- 自然接收的暗示; 独特的信息展示; 类似的卡片应用
Google arts&culture
- 首页feeds流; 知识图谱+标签+搜索->撑起内容体系结构; 快速定位到一个主题; 浏览作品的几种观赏方式
知识星球:
- 手机版的论坛: 从哪里看都像是论坛+细节差异->另一个物种; 蒸发式降温; 微信推送->拽人机制; 发现机制
SeatGeek:
- 门票的快速浏览; 票价的直观筛选; 位置的真实视角; 卡片的流畅转场
unread:
- 设计美学->咋见之欢vs久处不厌; 字体差异->英文vs中文; 信息架构的逻辑->解决问题vs制造问题
chartistic:
- 「假数据」的靠谱->假数据填充, 直接可以看效果; 被放大的屏幕; 自由度的取舍; 从场景出发

## 硅谷产品36讲

打造千万用户的世界级产品
idea/用户抱怨->实实在在有着卓越体验的产品; 团队->不同性格/不同经历/不同脑洞 工程师/运营/市场/法律/设计达人; PM行业-> 硅谷/国内 小公司/大公司 面试

- 产品经理面试秘籍: <https://hackernoon.com/4-pm-interview-tips-that-makes-you-a-strong-hire-5ea66dc78b15>

优秀产品经理

- 带领团队, 在高效的时间内推出满足用户需求的产品; 带领团队 理解用户需求 高效执行 长远眼光
硅谷产品经理
- 薪资 职业发展->离CEO最近的职位 产品全线负责人->功能需求+蓝图和策略
- 背景不同 影响他人而不是直接管理 1:7(工程师) 需求文档->长期计划 事无巨细->放权
科技巨头
- 大公司: 要思考怎样界定每个人工作的成功, 什么决定需要自己做, 什么决定可以让大家去做; 建立一个有效/可持续的工作流程; 新人快速上手; 团队规模的快速变化; 办公室政治
- 初创公司: 快速学习提高 用户调研等方式找正确方向 前瞻性+制定产品策略 最基本的工作流程和方法
- 大小公司间的转换
PM(product) vs PM(project)
- 做决定->开发出用户想要的产品 vs 组织团队在有限时间内按期完成一个非常复杂的项目
- 需求 排期 执行
每天
- 案例-发布新版视频版权管理系统 工作内容->产品发布不同阶段 许多会->各种人交流->高效开发
人员背景
- 简历背景: 先找自己的优势->再利用自己之前的背景
- 软实力背景: 领导能力 沟通能力 创新精神 勇往直前的执行力
寻找用户需求
- 立足用户, 痛点是不是真的存在(平衡车/区块链); 确定目标用户->数据分析+用户调研(假设痛点)->数据挖掘+用户反馈(验证假设); 用户调查->一对一/问卷
目标用户和用户画像
- 目标用户: 划分用户群再截取(拓展->专注); 100%满足一小部分人的需求远胜于只能解决一大群人50%的需求; 专注于小群体并不会让产品失去发展潜力(FB/Airbnb)
- 用户画像: 用户特点->这类用户抽象成一个人, 介绍这个人来描绘这类人
- 用户问题说明
用例:
- 描述在什么场景下用户用产品做什么事儿(微信➕好友)
MVP 最小可用产品
- 精益创业 凤凰男(最基本的就是对你好); 最小化=降低试错成本(速度>完美); 可行性=确保你的产品能够基本解决用户需求
产品发布前出问题
- 每天最多的事情就会砍功能, 保留最重要的功能+突发情况下的功能取舍
- 明确问题造成的风险以及受影响的人群->列清楚所有可行的选项->各选项的风险->大局观
制定产品成功指标
- OKR 已你在乎的作为衡量指标: 定义想要完成的目标, 期限/具体/可衡量; 最高目标+还有哪些指标+新功能和这几个指标之间的关系+思考反指标->A/B test
需求文档
- 目的: 不是面面俱到, 写清楚所有事情, 重要的是写出团队成员真正感兴趣的, 对他们有帮助的内容
- 要解决什么问题 论证痛点问题是不是存在 写清楚功能的成功指标和反指标 讲清楚要解决的用户场景 产品功能方案
用数据做产品决定
- 形成假设, 切记要分情况考虑(增加关注数=关注别人+被关注) -> 解决问题(A/B测试 统计图)-> 产品决定
- 需求会: 一鼓作气并设定作出决定的时间; 分工明确, 减少参会人数; 精准管理开会时间; 无法统一决定->统一思考方式; 明确会议目的
和工程师有效沟通
- 激发工程师能动性, 知道他在乎什么(升职/技术宅/点子大王/害羞); 讨厌开会打断思考; 什么决定需要领导大家做, 什么决定可以放心的教给工程师; 解决开发过程中的一些困难; 催进度->工程师是有掌控权的; 改需求->有效沟通积极承担责任
与设计师沟通
- 设计师都是艺术家
- 新人vs老手: 产品思考能力, 从头设计一个产品; 产品功能范围, 抓重点; 估计工期的能力; 解决模糊的产品问题
- 设计师喜欢连贯和和谐, PM需要考虑开发效率, 具体场景下连贯性是不是重要; 不同风格的设计师针对不同项目对PM的期待不一样; 工期原因导致PM砍设计师的设计蓝图
A/B test
- 清楚测什么+怎么测才上; 验证因果性的唯一途径; 明确到底需不需要(新功能一定要上->优化用户体验 样本数量太少); 短期数据vs长期数据(长期对比实验组)
增长黑客核心公式
- 把钱花在刀刃上; 增长黑客团队都是和其他团队并肩作战, 通过数据分析找到产品方向, 利用营销技巧实现产品增长; 增长=新增+留存+挽回; 提升产品的用户活跃指标; 规划大型公司增长团队架构

## 左耳听风

洞悉技术本质, 享受科技乐趣: 程序员技术练级攻略 成长 管理
业精于勤行成于思

- 技术变现: 打工vs在公司工作提高自己的技能->更多时间研究技术; 最好的seo就是独一份; 出书vs培训; 25-35是每个人最宝贵的时光, 要用在刀刃上; 技术和技能领先/对技术本质和趋势的敏感度; 只要你能帮上大忙就一定会赢得别人的尊重; 同样的for循环, 你写在这里一钱不值, 而我那里就值2k
- 如何技术变现: 积跬步; 关注有价值的东西->市场需求/技术趋势; 能体现价值的地方->高速发展的公司; 动手能力很重要; 关注技术付费点->帮别人省钱/挣钱; 找到有价值的信息源; 输出观点和价值观; 朋友圈很重要; 会赚钱 会投资 时间比钱重要

渴望 热情 选择:

- 加班没时间学: 对学习是有渴望的
- 写这么多东西: 学习阶段->利益驱使阶段->记录自己观点打脸阶段->与他人交互阶段
- 职业发展: 20-30打基础, 30-40发展; 客观审视自己->激进冒险vs按部就班; 确定自己想要什么->「极端」, 不随波逐流; 长期可能性vs短期功利; 关注得到vs失去; 不要和大众的思维方式一样
时间管理: 同扭曲时间的事情做斗争
- 主动管理: 不是管理自己, 而是同事+自己的信息
- 学会说不: 提供可选方案vs回绝 部分满足 共同抗压->有条件的说是
- 加班: 两害相权->bug
- 开会: 讨论问题vs讨论方案 有议题vs有议案
利用好自己的时间:
- 投资自己: 基础+文档(系统的学习) 解放生产力(解放自己) 自己成长 建立高效环境
- 规划: 优先级 短作业 想清楚再做 长期利益
- 用好时间: 将军赶路不追小兔 形成习惯 形成正反馈 反思+举一反三
识别表象和本质:
- 兴趣和投入: 需要保持 可以培养->正反馈/成就感
- 学习和工作: 解决实际问题/和他人讨论/高手帮助->学习/成长; 学习方法->对新事物的学习能力
- 技术和价值: 规模化/高效解决问题
- 趋势和未来: 被人控制的->有权有是有钱的公司和国家->成长到加入第一梯队

技术领导力 解决问题:

- 技术是否重要->野蛮开采->资源整合->精耕细作->发明创造; 长期->差距
- 是什么: 尊重技术, 追求核心基础技术; 自动化+组织效率; 解放生产力->提高人效; 可重用的技术组件; 坚持高于社会主流
- 如何拥有: 所有工程师都有机会; 能够发现问题->解决问题的思路和方案并对比->正确的技术决定->更优雅/简单容易的方式解决问题->扩展性/重用性/可维护性->正确的方式管理团队->创新能力
- 4个方面: 扎实的基础技术 非同一般的学习能力 坚持做正确的事 不断提高对自己的要求标准
- 如何拥有: 基础技术->编程(c/编程范式/算法/数据结构)+系统(计算机系统原理/操作系统原理和基础/网络基础/数据库原理/分布式技术架构)->不可速成; 提高学习能力->信息源/与高手交流/举一反三/不怕困难; 坚持做正确的事->提高效率/自动化/前沿技术/知识密集型/技术驱动; 高标准要求自己->Google评分卡/技术嗅觉/实践,学以致用/lead by example
大家愿意追随的leader:
- leader vs boss: 指导vs驱动; 制造热情vs制造畏惧; 面对错误->解决问题的技术或管理方法vs人事惩罚; 展示怎么做vs只是知道怎么做; 发展人vs用人; 给予团队成绩vs从团队收割成绩; 沟通+写作vs命令+控制; 跟我上vs给我上
- 帮人解决问题; 被人依赖(甚至敏感话题, 比如猎头, 吐槽公司); 赢得他人信任(相信你能做成事->能打开心扉说事); 开放的心态+倾向性的价值观; lead by example(ABC, always be coding); 保持热情和冲动; 抓住重点看透事物本质; 描绘令人激动的方向, 提供令人向往的环境; 铺路->给他人创造机会
故障处理:
- 快速恢复: 重启+限流 回滚 降级 紧急更新
- 准备: 服务地图: 以用户功能为索引的服务和资源的全视图->导航仪: 为各个服务制定关键指标/一套运维流程和工具/应急方案->故障等级/故障演练/灰度发布
- 最佳实践: 复盘(整个处理过程 原因分析 5why 整改计划) 故障责任人(对事不对人) 整改方法->技术手段 根除问题的本质(举一反三 简化技术架构/流程/组织 全面改善优化整个系统/组织)

程序员应该知道的知识:

- 要读的书: <https://stackoverflow.com/questions/1711/what-is-the-single-most-influential-book-every-programmer-should-read>
- 应有的知识: <http://matt.might.net/articles/what-cs-majors-should-know/>
- LinkedIn 代码复查: <https://thenewstack.io/linkedin-code-review/>
- 代码质量研究报告: <https://cacm.acm.org/magazines/2017/10/221326-a-large-scale-study-of-programming-languages-and-code-quality-in-github/>
- c++软件性能优化: <http://agner.org/optimize/optimizing_cpp.pdf>

程序错误处理 error code & exception:

- c: errno()+errstr()
- go: 多返回值(err, res) 资源清理(defer)
- c++: 资源清理(构造函数+析构函数)
- 异常 exception: 不期望发生vs可能会发生
- 场景: 资源错误 程序错误(log/监控/报警) 用户错误(通知用户端)
- 异步编程: onSuccess() onFail()
- 最佳实践: 统一分类错误字典 同类错误的定义最好可扩展 同类错误处理同样模式 定义错误严重程度 错误信息vs错误码 忽略错误最好有日志 注意不停报错 错误处理逻辑vs业务处理逻辑 尽可能在错误处理的地方处理错误 尽可能返回原始错误 处理错误+清理资源

数据安全:

- equifax信息泄露 + apache struts 漏洞
- 数据泄露攻击: 框架或库已知漏洞/暴利破解密码/代码注入(sql/xss/csrf)/程序日志/社会工程学
- 数据管理: 只有一层安全; 弱密码; 向公网暴露内部系统; 系统安全补丁; 安全日志被暴露; 保存了不必要的用户数据; 密码散列
- 安全建议: 追踪依赖的安全性声明; 建立快速发布带安全补丁产品的流程; 所有复杂软件都有漏洞; 建立多个安全层; 针对公网资源建立对异常访问的监控机制
- 技术上的安全做法: 区分敏感数据->隔离/加密->api交互而不是直接使用数据->关键信息传到外部系统需要做通知(用户/管理员)

go/docker:

- 语言简单上手快; 并行+异步几乎无痛点; lib库小而全; 社区; 工业化标准; 杀手级应用; 提高开发效率的框架; 巨型技术公司做后盾; 软件开发中的痛点
- PaaS: 软件生产线devops; 分布式服务化; SLA; 软件能力的复用
- 技术的发展过程很重要->技术变迁和行业发展; 关键新技术->抢占先机

分布式架构:

- Amazon: 分布式团队(two pizza team) 分布式服务查错 开发all(eat your own dog food) devops(运维优先->简化/自动化) 内部服务/外部服务一致
- 需要注意的问题: 异构系统的不标准问题 系统架构中的服务依赖性问题 故障发生的概率更大 多层架构的运维复杂度更大 分工->协作统一和规范ch
技术栈:
- 目标: 大流量处理 关键业务保护
- 提高架构性能: 缓存 负载均衡 异步调用 数据镜像 数据分区
- 提高架构稳定性: 服务拆分 服务冗余 限流降级 高可用架构 高可用运维
- 关键技术: 服务治理 架构软件管理 devops 自动化运维 资源调度管理 整体架构监控 流量控制
- 大纲: 应用整体监控 资源/服务调度 状态/数据调度 流量调度 开发/运维自动化
全栈监控:
- 多层体系: 基础层(cpu等) 中间层(nginx等中间件) 应用层(http访问/调用链路等)
- 好的监控系统: 监控数据可以辅助到业务而非隔离 监控关键数据项而非非常多(信息太多等于没有信息) 关注应用整体SLA 关联指标聚合 快速定位故障
- 场景: 体检->容量管理/性能管理 急诊->定位问题/性能分析
- 如何做: 服务调用链跟踪 服务调用时长分析 服务topN视图 数据库操作关联 服务资源跟踪
服务调度:
- 服务关键程度和服务的依赖关系: 微服务是服务依赖最优解的上限, 而服务依赖的下限是千万不能有衣懒环 依赖反转->container/pub-sub
- 服务状态和生命周期管理: Provision ready run update rollback scale destroy failed
- 整个架构的版本管理: 服务版本 运行环境 实例数范围
- 资源/服务调度: 服务状态的维持和拟合 服务的弹性伸缩和故障迁移 作业和应用调度 作业工作流编排 服务编排
流量和数据调度:
- 功能: 服务控制(发现 路由 降级 熔断 保护) 流量控制(LB 流量分配 流量控制 异地灾备/多活) 流量管理(协议转换 请求校验 数据缓存 数据计算)
- 关键技术: 高性能 抗流量 业务逻辑 服务化
- 状态数据调度
- 分布式事物一致性
PaaS:
- 软件工程能力: 提高服务SLA(高可用系统 自动化运维) 能力/资源重用/复用(软件模块复用 软件运行环境/资源重用) 过程自动化(生产流水线 自动化运维)
- 本质: 服务化 分布式 自动化 分层开放 高可用 devops
设计模式:
- 弹力设计: 认识故障和弹力设计 隔离设计 异步通讯设计 幂等性设计 服务的状态 补偿事务 重试设计 熔断设计 限流设计 降级设计
- 管理设计: 分布式锁 配置中心 边车模式 服务网格 网关模式 部署升级策略
- 性能设计: 缓存 异步处理 数据库扩展 秒杀 边缘计算
经典资料: <https://time.geekbang.org/column/article/2080>
分布式数据调度相关论文: <https://time.geekbang.org/column/article/2421>

编程范式: 泛型编程 类型系统和泛型本质 函数式编程 修饰器模式 OOP 基于原型的编程范式 go语言的委托模式 编程的本质 逻辑编程范式 程序世界的编程范式
区块链技术: 革命性和技术概要 哈希算法 加密和挖矿 去中心化的共识机制 智能合约 传统金融和虚拟货币
程序员练级攻略2018: [技术资料](https://time.geekbang.org/column/article/12561)
程序员面试攻略: 面试前准备 面试中技巧 面试风格 实力才是王中王

高效学习 端正学习态度

- 主动学习vs被动学习
- 低水平勤奋 努力读更多书 满目追求阅读速度和数量 使蛮力 -> 要思辨 要践行 要总结和归纳
- 浅度学习 -> 深度学习 高质量信息源和第一手知识 知识连成图 不断反思思辨 举一反三并践行 -> 知识采集/知识缝合/技能转换
- 学习是为了找到方法 学习是为了找到原理 学习是为了了解自己 学习是为了改变自己
高效沟通 talk和code一样重要
- 沟通 -> 通讯协议

魔数 0x5f3759df: 平方根倒数速算 浮点数
机器学习: <https://time.geekbang.org/column/article/862>
git协同工作流: gitflow/githubflow/gitlabflow -> 微服务/soa/devops -> 软件架构/软件开发流程

## serviceMesh 实践指南

服务治理和请求可靠传输就是 service mesh 这个基础设施层的职能边界
app - service mesh - container orchestration(k8s) - container runtime(docker) - infrastructure(aliyun)
架构的本质就在于鱼和熊掌不可兼得
单体应用 疯狂试错 -> 业务稳定期 服务化改造(rpc 容器化/混合云 跨语言服务化 serviceMesh)
未来 -> 服务化对所有资源的封装(比如 redis/memcache)

![服务化架构演进](https://static001.geekbang.org/resource/image/6e/d9/6eaa78e4649cc321b4721ceebe4595d9.jpg)

![service mesh](https://static001.geekbang.org/resource/image/0b/ac/0bf77f6cc89f1c81b5e7c2d049b3edac.png)

## 深入浅出grpc

基于grpc java版讲解, 涉及到很多java中实现service过程中的server/client细节, 其实 grpc 涉及到的 rpc+protobuf+http2 知识还是很容易理解的, 只是套上不同语言的壳, 就涉及到不同的实现方式, 进而产生庞杂不知道怎么使用的感觉. 以php为例, 官网没有 php grpc server 的代码自动生成, 但是用 swoole 来实现的 grpc server/client, 代码都很简单.

> 简单, 是一种根植于血脉中的畅快 -- PHP

- 01 | gRPC 入门及服务端创建和调用原理
- 02 | 客户端创建和调用原理
- 03 | gRPC 线程模型分析
- 04 | gRPC 服务调用原理
- 05 | gRPC 安全性设计
- 06 | gRPC 序列化机制

## 性能优化面面观

- 大规模场景下的k8s service LB 性能优化 <http://ppt.geekbang.org/slide/download/1017/59b5094d3cde6.pdf>
- Facebook 大型移动应用性能优化实践 <http://ppt.geekbang.org/slide/download/957/59605ba216d01.pdf>
- 驱动数据中心软件的极限并发性 <http://ppt.geekbang.org/slide/download/1069/59e5786a731b1.pdf>
- 腾讯云大规模任务调度的性能突破
- 硬件特性如何影响软件性能？ <http://ppt.geekbang.org/slide/download/1077/59e5a493bc8c1.pdf>

## 如何做好一场技术演讲

- 演讲前的准备
- 避免演讲前的紧张情绪
- 演讲中讲个好故事
- 把观点深深印在别人脑海中
- 演讲中的肢体语言管理和声音控制
- 8个技巧

## 技术管理

成长不是顿悟, 而是练习

- 内容: 技术领导方面的学习感悟; 技术领域内容; 硅谷文化/见闻/经历; 技术人员成长
- 职场分身术: 带人 从给答案到做引导; 什么时候适合->给答案/线索/让对方找答案; 如何引导->通过问题->提高解决问题的能力
- 帮助团队成员成长: 迅速(指导/反馈/监督/交流/协调资源); 明确的分解和布置任务; 建立有效的合作关系(上下级/相关部门); 不要陷入静态思维(换位思考); 看看大公司怎么做的(是否可以被提升->过去半年到一年里是否按照下一个级别的标准在工作); 个人成功->自己 vs 管理者成功->团队
- 激发团队人员责任心: accountability/responsibility; 明确责任制/让责任制变得有效/成员有归属感
- 提意见: 自己是否适合提这个意见; 放低姿态->更容易获得尊重; 合适的时机; 夸对方+正向反馈
- 别人提意见: 了解自己内心->对意见的一般反应; 克服情绪上的障碍
- 管理与被管理 期望值差异: 最需要被避免; 增加彼此的了解; 每半年/一年进行一次期望值深度对话; 有了约定后要持续跟进
- 管理者不用亲力亲为: 事情能不能做好vs按照自己的方式做好; 介入->什么方式哪些地方; 授权和分配任务->明确目标/制定计划保持跟进/给出反馈尤其是正面反馈; 不用亲力亲为的关键->有效的任务分配/保证分配的任务能圆满完成
- 不要做微观管理者: 独立自主vs指导帮助->因人而异/因时而异; 跟进的粒度->制定目标确定传达/多给指导少亲手做/设定频率保持跟进/交流难点给出建议; 交流的重要性
- 兼容并包的领导方式: 保持员工组多样性->互联网市场组成多样/产品的用户多样->国籍人种性别/团队内部差异/团队创新思维(组织要么创新, 要么死亡)->坚定的承诺/谦卑的勇气/正确的认知/开放的心态/高情商/合作的意愿
- 工作分配: 没有建立充分信任->建立参考基线/问题比答案更重要/工期估算/执行力/后期维护; 细节->新人/不同类型的员工/大项目需要指定负责人
- 工作中的人际关系: 保持开放心态和愿意沟通的态度; 尽可能对别人的分享工作交流持积极友善鼓励的态度; 加入一些有利于自己成长的社交圈子; 适当寻求帮助; 对别人的意见尽可能认真对待
- 理解并建立自己的工作弹性: 具有弹性的架构才是有生命力的; 焦虑 rumination; 正确面对压力->走出思维误区->结交积极向上的人保持良好心态->付出和回报不一定等比/fake it, until you make it
- 说不: 轻重缓急/正确评估自己的能力和时间资源/勉强做
- 技术人员建立影响力: 存在感->不要在一些可有可无的事情上纠缠; 说服力->观点清晰条理清楚/换位思考; 谈判力->取决于自己的知识智慧经验直觉/事情的来龙去脉/共同利益减少冲突; 协调力->从平时做起/成为团队里让事情发生的人/对资源保持敏感度/适时传达沟通; 鼓舞力-> 担心/困难/长处/成果/建设性意见
- 技术人的犯错成本: 所有关于公司公关层面的事都不是小事; 人事变动的宣布一定要谨慎; 技术/业务问题不确定就不要随便给答案; 技术失误导致错误的产品决定; 错误->要去试错/要在错误中成长
- 错误中成长: 伸展错误->挑战能力之外->培训机制; 无知错误->信息透明和共享; 粗心错误->复盘机制; 高风险错误->planB
- 职场规划: 想清楚问题再和领导沟通寻求帮助->个人价值观/长期愿景/达到目标还缺啥/优势和长处(合作性/独立思考/行动快速/产品思维); 需要领导提供什么支持->能证明自己的项目/需要人带/更多练手机会/专注培养某一项技能/接触更多业务架构的讨论/参加一个系统的培训; 想要什么差距在哪->和领导沟通寻求帮助->设定目标并设定一个你和领导都满意的规划->让计划可执行可追踪

- 硅谷公司一对一沟通: 谈话内容没有定式; 沟通更有效(善于聆听/换位思考); 沟通的杠杆->对技术领导而言, 团队的成功才是真正的成功
- 硅谷人到底忙不忙: 2种氛围(工作狂vs平衡工作生活); 主动延长工作时间->对自己有帮助/对升职加薪没有直接联系; 这种氛围下充分利用好选择和自由->和组员沟通, 了解他们真正想要什么
- 硅谷面试: 多轮面试->算法编程(编程硬功夫)/系统设计(根据自己的能力和经验去架构整个系统)/工作经验面试(技能树)/价值观+团队协作; 多轮->侧重/面试官的主观影响; 刷题->重在功底/是不是真的懂; 面试官经验->思路局限在一个熟悉的领域; 潜规则->难度递增; 如何拿到面试机会->内推/简历闪光点/共事过同事给能力背书
- 硅谷开发流程: OKR设立->主项目+子项目->子项目生命周期->主项目生命周期->收尾维护复盘
- 硅谷 code review: commit/PR/MR; 代码合并规则->评论; 帮助成长, 而不是代码; 提交代码类型 bug/优化/迁移/feature; 注意事项->PR+单一+找谁审/代码风格+可读性+错误处理+测试+质量和规范+架构+性能+@
- 中美支付环境差异: 市场占有->各种卡/ACH/支票/现金/电汇/PayPal; 钱包系统->NFC/RFID/QRCode/磁感/安全芯片/主机卡模拟/客户验证数据/令牌化技术; 支付趋势->可穿戴设备/越来越快/虚拟币
- 编程马拉松 hackathon: hack项目成为正式产品的原型; 技术不一定在代码里; 和大牛结对编程; 即使面对大牛也可以表达意见; geek is the new sexy
- 各角色沟通: 产品经理->产品和项目的边界/沟通协调/产品给人用的, 是人就会有需求/产品经理技术经理项目经理互助; 数据工程师->数据试验/数据指标/数据异常监控

- bug引发事故: 追究责任, 而不是惩罚->做好善后/避免再犯; 对事不对人->及时发现和制止/改善制度和流程; 反复问为什么->从根本上发现问题; 员工关系建立->信任互助, 为目标努力, 而不是不安全感->不断反思/学习/进步的良性循环
- 项目延期: 为什么项目容易延期->人们在历史长河中累积的经验失效了; 怎么办->流程(计划制定与跟进)/优先级/共享项目状态表/不要漏掉任何一个人/提供有效的反馈渠道
- 项目管理三个技巧: 项目计划要对多个项目进行细分重组(能力->任务/时间->负债平衡/有挑战有意思vs脏活累活/挑战->成长/任务之间的依赖/任务->主题主线->成就感); 细分重组; 工期估算->自己判断+组员沟通->截止日期才是最好的效率工具->过于乐观+留出缓冲; 实时跟踪+planB->一旦出现延迟一起分析原因

- A/B test: 永远不要过分相信你的直觉; 试验样本的数量和分配很重要; 分析的维度尽可能全面; 其他组的改动对A/B test 产生的影响; 比较值的趋势必须是收敛的, 而不是发散的; 数据埋点(前端实时数据/后端实时事件); 形成一个流程/设计一个工具; 试图给每个结果一个合理的解释; 必要的时候重新设计实验; 不同客户端分开进行测试
- 幂等: 幂等令牌+确保唯一性(比如DB唯一索引); 令牌产生时间怎么产生/令牌误删除的可能/各种竞争条件/请求重试处理; 系统中需要多层幂等
- 大数据时代的算法: 算法是面试敲门砖; 编程->算法思想vs具体算法; 不精通算法的工程师永远不是好工程师
- 数据库知识: 数据库从来不出问题->业务量/流量没上来->尽量避免坑, 更快的修复; 选型; 数据库相关架构; 人为错误(误操作/修改表结构锁表); 访问瓶颈; 研发过程->索引/事务支持/锁(乐观锁/悲观锁)/cache/主从
- 系统拆分: 创业/项目初期->业务拆分(productivity vs complex)->注意事项(测试变复杂/接口改动需要大量协调/报错处理/日志的完整性/超时设置/代码自由); 拆分临界点->业务量需要水平扩展/开发人员经验/几乎不可逆
- api设计与实现: 签名; 设计原则->restful/参数结构化/认证和安全/客户端无关/幂等; 好的api框架->访问权限统一控制/自动测试/请求响应格式以及序列化反序列化/日志与日志过滤/自动生成文档/对架构和性能的影响; 设计中的平衡->自由总是相对的/当前vs未来/可维护性vs效率/aop
- 编程语言: 初学者不用纠结先用哪种语言->跳进去游几圈->不可能只学一门语言; 精通一门; 也可以用脚本语言入门, 比如python; 前后端至少各掌握一门; sql 非常重要的一门语言; 要测试; 并发/分布式思维看待程序
- java: 核心库非常慎重/函数的精度和运行时间要求非常高; 推荐新手入门/常见开发问题; 不要重复造轮子也不要搬太多轮子/了解DI, 选择一个好框架/所有项目使用统一文件结构/api保持统一风格和模式/规范开发环境提供合适工具

## 技术与商业案例解析 2018-12-20 18:28:43

> 企业分析要求综合素质: 不只开发的世界; 经济学基本原理; 基本财务知识; 现代企业如何运行的; 以史为鉴; 做人要有大局观; 积跬步

选择比努力更重要
眼界+人+方法论
往者不可谏来者犹可追
站在行业变革前夜, 只有伟人才能比别人看得更远
一个人的成功: 机遇+个人能力+眼界
有些时候，花时间做一些近期内没有什么意义，但是却能够提高自身

Amazon 领导力准则:

- 贝索斯: 公司领导人应该旨在实现长远的目标 而不应该屈从于短期的利益
- 敢于谏言, 服从大局: 办公司政治 一团和气 维持和领导的关系 vs 追求真理; 做出决定以后大家一起承担责任, 然后就事论事进行改进
- 决策正确: 领导必备的素质->不拘泥于细节和自己熟悉的范围; 寻找多样视角并挑战自己的观念->经常修正自己对事物的理解和决策; 深思熟虑+能够跳出自己的观点
- 客户至尚: 客户入手->反推工作; 关注竞争对手, 但更关注客户; 客户总是非常不满足(总是想要更好的东西, 甚至他们都没有意识到这一点); 度难以把握
- 节俭: 成本控制; 物美价廉 电商; 云计算->更低廉但盈利更多; 员工福利/仓库空调/面试/员工绩效提高计划
- 主人翁精神: 长期利益vs短期利益; 小团队vs公司整体; 薪酬体系(少现金多股票)
- 选贤育能: 不断提升招聘和晋升员工的标准; 选拔天才贯穿始终; bar raiser; 高于组内平均水平->一走一留
- 最高标准: 近乎苛刻的高标准并且不断提高标准; 确保问题不蔓延及时解决并不复现
- 创新简化: 简化和创新密不可分; 创新不要受局限; 创新要接受长期被误解; 退货无客服参与
- 崇尚行动: 速度对业务影响至关重要; 很多决策和行动都可以改变->不需要广泛推敲; 深思熟虑/管理好风险->进行冒险; 速度就是一切; 让市场告诉是不是犯错了; 尝试->失败->纠正->前进
- 远见卓识: 局限性思考->不同角度考虑问题
- 好奇求知: 持续学习, 不断提升; 对各种可能性保持好奇心并付诸行动
- 赢得信任: 专注倾听, 坦诚沟通, 尊重他人; 善于自我批评; 对自己和团队都有高要求
- 刨根问底: 深入各个环节, 掌握细节; 审核, 数据vs传闻->怀疑态度; 不遗漏任何工作->最高标准
- 达成业绩: 结果->硬指标; 关注业务的关键决定条件, 确保工作质量并及时完成; 面对挫折不气馁

Amazon:

- prime 客户至尚
- 硬件: 对未来趋势把握准确vs能不能在既有条件下实现目标; kindle->积累的运营数字产品的经验; FirePhone;
- echo: 忠于市场的真实反应/生态圈/开放性; Tap音箱; echo dot; echo show; echo plus(低音喇叭 智能家居控制); echo spot; echo button
- 语音助手Alexa: 语音处理领域Nuance/Yap/Evi; 独立出来->平台->生态
- 面试: 领导力准则; bar raiser 企业文化守护者 选贤育能
- 大数据: dynamo(nosql先驱); EMR; 插管吸血开源; redshift(数仓/数据分析); Aurora(兼容mysql); Athena(查询服务); kinesis(流数据导入与分析); Glue(ETL); quickSight(数据可视化)

Alibaba:

- 大数据: maxCompute; OceanBase; PolarDB(两地三中心主从备份; 软硬件结合->10倍性能); 重叠的功能; 流计算引擎->JStorm/Flink/Blink

Google:

- 占领客厅: chromecast 视频播放投到电视上; nest 智能温控器; 谷歌音箱(技术->7个麦克风vs2个麦克风 云端服务)
- 创新精神: 花费大力气去解决难题; 制度上支持 80/20; 创新->非常符合实际需求; 下一代内部实施后才会在业界大肆宣传上一代技术; 以论文方式公布核心技术而且只公布一部分; 宣传一个技术时往往宣传得普遍适用言过其实
- 面试: 面试和决定发offer的人之间是分离的; 非常难->面试打分5等(不想->想)->委员会(招/不招/加面/有条件的招)->资深副总裁->队伍匹配(资料库); 更苛刻的面试失败惩罚->冷冻期/3次面试失败; 只要最优秀的人+优化谷歌自己的利益+有钱
- 大数据: 三驾马车(FS/MR/BigTable)->互联网内容存储/倒排索引(词->文档)/增量更新; 广告业务(羊毛出在狗身上, 让猪买单); 起个大早, 赶个晚集
- MapReduce vs DBMS -> spark
- Spanner: 多数据中心->存储/查询/一致性; 时间同步问题->原子钟+GPS; F1->兼容mysql/扩展性非常好; 金融行业->两地三中心

微软:

- 面试: AA; 自上而下的管理风格(对上级负责); 领导者极大的自由裁量权->一个圈子加一个圈子
- office: 升级销量->为了创新而创新; office365->ui和底层分离/onedrive; 收费方式->月收
- 大数据: 微软硅谷研究院(dryad); 大数据发展史是做OS的人向做DBMS的人发起的一场战争; 必应的cosmos(压缩算法; SCOPE); azure->HDInsight/DataLake/CosmosDB
- 综合工程师改革 陆奇: 软件平均开发周期三年->三权分立(开发/测试/项目经理)->测试和开发合并
- SQLServer 眼光决定一切: 偷懒, 使用windowNT来实现某些功能->重写->7.0 几乎重写所有模块 存储引擎/数据处理/数仓/数仓查询语言MDX/ETL支持->大跃进 基于DB的WinFS

facebook:

- 面试: 2轮电面->4轮现场(onsite)面试->面试官「包裹」->HR->招聘委员会(招/不招/加面)->VP->轮岗期; 刷题; 考评0-7档; 倾向于使用年轻人->勤奋和有更多时间工作
- 用人之道看企业发展: 招聘 晋升; 怎么用人需要什么人->企业特色/发展前景
- 大数据: Hive(快糙猛)->presto; Cassandra(Dynamo)->HBase(BigTable)
- 黑客精神: move fast and break things(快糙猛); hack everything; move fast with stable infra

LinkedIn:

- 大数据: kafka samaza(流处理)

ashton-tate 桌面数据库

- dBase-> 偷懒 用工具翻译汇编到C语言-> 添加菜单 -> 遇到的进攻: 带编译器执行效率更高/自定义函数 -> 半成品 -> 卖身给竞争对手
- 无敌不可以肆意妄为: 一直未解决向后兼容问题; 目光短浅, 签下技术债; 对市场需求和变化反应慢; 食言而肥, 让用户失望

reddit 天涯美国版:

- 比较核心的功能: 分容分享+打分机制(赞成反对/时间)
- 论坛叫好不叫座, 盈利困难

zynga 发家从农场开始:

- 德州扑克->农场种菜farmVille->CityVille->超强吸金->大扩张->续作太烂而且使用交叉推广
- 启示: 太多精力关注自己的失败而没有注意到智能手机兴起; 领导人能力; 对待失败的态度; 乱花钱; 领导人眼光

保罗.格雷厄姆 创业教父:

- Lisp专家 blub论断(不同编程语言不同在哪 怎么判断更高级)->语言特性
- 创业思考: how to get startup ideas; do things that don't scale; startup=growth
hacker news 创业+社交:
- 和reddit相似: 新闻集中营, 允许用户上传新闻
- 不同: 专业论坛vs综合性论坛 用户规模 技术含量更高
- 拥抱变化, 适应变化, 才是常态
Y Combinator 孵化器vs培训班:
- 孵化器等同骗子->创业团队提交申请->一年2次, 每次3个月创业投资培训计划->团队PK->入选团队拿走7%股权
- airbnb: 你们公司这个想法到底能不能成功我不知道, 但是你们连个人一定能存活下来. 因为你们这样坚定的信心和做事情的决心, 我相信你们两个人
- 创业项目vs创业团队
- 创业导师的经验可以给创业团队带来非常多的价值; 方便后续融资; 维护前期创业者和后续创业者类似校友的关系
- 创新工厂: 孵化器->纯VC

SAP:

- DB2 Oracle
- HANA战略: 内存数据库 列存储 支持事务 同时支持分析查询 几乎完成整合R的功能 现代数据库常用的shared-nothing架构
- 高价: 关注集中到价格上; 营造高大上的形象
- 敢吹->半成品就敢给用户->高效率开发(4年80个版本)->作为公司战略高度->收购老牌数据库厂商Sybase
- 成功(大大)忽悠+成功(高效)执行=成功产品

salesforce SaaS先驱:

- 理念超前: 基于什么层面的超前(领域, 领域内愿意吃螃蟹的有多少); 公司使用什么态度来对待这个概念; 到底多超前; 盈利

sun:

- 廉价又高性能的工作站/服务器
- java语言: 机器/os无关, 可以运行在任何平台上
- pc+win/linux->量变引起质变; 2000->2008
- 看错敌人, 等待自己的只有灭亡; 挖墙脚的都是敌人, 也许现在看起来微不足道; 一锤子买卖vs持续不断; 过日子要精打细算->开源节流

杰克:

- 严格按照规范: 一天工作16小时, 8小时Twitter, 8小时Square
Twitter:
- you can either be a dressmaker or the CEO of twitter. you can't be both
- 华尔街给新公司蜜月期->估值模式
- 硬道理: 公司, 总是要赚钱的; 现在盈利vs画大饼
- 站在风口上, 猪也会飞; 但是风停了, 就很容易看到是真凤凰还是只是头猪了
square:
- pos机
- capital: 小微企业贷款->无固定还款日期, 刷信用卡时还
- caviar: 送餐业务
- 流血IPO
- 比特币支付
- 创新; 把核心用户的体验做到极致(手续费/到账时间短); 融资能力(Twitter董事会虚职/流血IPO)

Box:

- 2008经济危机->传统企业寻找更廉价it设备; iPhone/ipad等新硬件
- 企业市场 盯着钱做业务 vs 互联网企业模式 花钱培养用户流量
DropBox:
- 存储: aws s3; Y Combinator 投资; 面向消费者
- UI: 特殊文件夹
- 自建数据中心

Pinterest 图片社交:

- 图片是一个更好的沟通方式
- 通过pin的方式保存图片->按照不同类别组织->共享图库给其他用户->可以follow->app版
- 盈利: 企业宣传; 企业图片广告; app添加购买功能
- 版权: nopin html tag; 自动屏蔽一些网站
- 是否上市->创业原始股

Groupon 团购鼻祖:

- IPO->庞氏骗局: 高折扣无法维持->老客户流失vs新客户入局
- 卖身/被收购: 创始人->风口上的猪vs弄潮儿

大数据:

- 自建轮子: 愿不愿意vs能不能; 公司到底有没有需求; 公司文化; 够用+专有工具导致被锁死在平台
- 抱团取暖vs插管吸血
- Palantir: 国安; 金融机构
- splunk: 机器大数据的分析; 企业安全/网络安全; 立足核心价值+非常努力多元化发展
- confluent: 在kafka上飞驰的数据交换者; 数据库日志恢复功能->数据复制->数据交换(生产者/消费者); 主要产品开源+控制中心收费
- powerSet: HBase; 自然语言的SE
- dataStax: Cassandra(没法保证行级的一致性); 整合spark/Solr提供数据分析搜索功能; 多语言/平台支持; IDE环境
- databricks: spark; 基石上开发附加产品; 基于spark平台的应用进行认证确保兼容性; 技术支持
- data Artisans: Flink(理念更先进)
- Dremio: hive->drill->Arrow; 预先计算
- imply: druid->同时支持离线实时数据分析/可插拔查询系统/不支持join/不支持sql; SQL层组件+可视化查询模块
- kyligence: 如何有效的进行预计算
- snowflake: 云端弹性数据仓库
- PingCAP: TiDB->newSql; mysql层->100%兼容/使用mysql的测试/备份协议; 存储层->raft/spanner
- 蓝海vs红海
- 通过技术积累来判断企业: 最好本人就是某一方面的专家; 技术是否有适用有意义的场景; 领先独到的优势; 技术积累的广度和深度; 不断充实自己, 提高对技术和商业的理解

论文:

- 作为互联网的软件开发人员, 能不能读懂论文, 是一项可以决定自身发展潜力的必备技能
- 写作角度: 写给谁看的(顶级期刊/发表目的); 怎么写出来的(对同行的知识结构有假设->基础知识; 不说谎->化了妆; 批判性而非教科书式)
- 基本功: 写+发表; 找到2篇可以比较的(后者引用前者); 一般只交代作者成功的故事
- 亲身实践(加入类似团队)+看解读

办公软件的战斗:

- 微软霸主: 企业很多时候是瞎折腾+内斗(no zuo no die); 没有跟上时代; 屡败屡战; 螳螂; 菜单/可以读取竞争对手的格式; 红狮会战(Excel); 软件合集works
- VisiCalc: 行是数字, 列是A1; 没有申请专利; 写软件vs卖软件->拖更新vs拖钱
- WordStar: 所见即所得; 全球公认最大的纯软件公司(->莲花->微软); 鼠标+下拉式菜单; 核心团队出走/重新收购->多产品线无法整合->政治斗争下的「吃螃蟹」
- WordPerfect: 汇编->性能; 免费技术支持(等待时讲笑话不至于无聊); 仓促推出window版
- 莲花公司: 花巨资请麦肯锡做软件推广->华尔街日报全版广告; 磁盘附带软件说明书; notes->封闭性(华为2015迁出); IBM恶意收购
- slack: 非常强大的内部沟通功能; 非比寻常的搜索功能(消息/文件/通知等跨类搜索); 自带一个机器人(使用问题/定制); 整合第三方应用/应用商店
- 启示: 避免内斗 居安思危; 敌人的出现往往出其不意(甚至不同领域, 口香糖vs手机app); 全方位拓展往往大概率失败vs拓展/尝试->抵御危机; 收购/仿造有威胁的产品

Zenefits:

- 保险和就业挂钩->大公司好解决/小公司难处理
- CEO作弊丑闻->裁员控制成本

巴顿:

- 把数据和产业结合起来, 从而能够发现痛点, 弥补鸿沟, 创造价值: 哪些行业需要数据; 高效精准数据采集; 数据变现
- ecpedia: 猫途鹰; 重视商业vs重视技术
- zillow: 牛人的观念总是惊人得相似
Zillow(巴顿):
- 盈利: 广告+订阅
- 买买买来巩固自己的地位 -> 买着买着就撑不住了
- 效率就是金钱(赚钱和花钱的速度)
- 和Redfin差不多同时出现在市场上
- 传统行业: 竞争 vs 提供技术服务
Glassdoor 让公司信息对个人透明:
- 必须用公司名为后缀的邮箱注册; 提供薪水信息->可以查看薪水分布; 人工审查
- 服务: 企业做品牌建设; 搜索公司职位->薪酬/排名/员工排名等信息; 广告系统; Facebook inside connection; 集成职位SE

甲骨文:

- 面试: 校园招聘 唯出身论 精英文化

智能音箱的战斗:

- 白马非马 智能音箱非音箱: 语音->新交互入口->AI技术要求很高
- 透过一个领域联合分析多个企业: 同一件事情, 不同的企业怎么做的; why; 对比->深层理解企业
- 分析企业2要素: 远见(think big)+执行力(bias on action)

Valve:

- 半条命 MOD大法; 半条命2 黑客 数字版权
- stream: 游戏界的iTunes; 捆绑大旗; 求生之路1-2; DOTA2
- 无领导管理: 想要干什么, 兴趣最重要->主动意愿非常强的人
- VR: vive HTC->Oculus售价高+独有->宝宝不开心宝宝有情绪(黑客破解)
- 制度: 创始人很有钱; 初期就盈利; 不扩大规模也不上市

雅虎 yahoo:

- 软银->互联网第一股->互联网泡沫->CFO/投入产出比(节流)+CEO/新媒体vs高科技(开源 从没有发明过任何开创性技术)->和谷歌拼技术->杨致远/微软收购(陆奇)->2008->流水CEO
- 杨致远: 分类网站(信息齐全/准确); 不重视核心技术; 卖给微软vsVerizon
- 通过分析人去分析企业->考验分析者本身的水平
- 大数据领域的活雷锋: Hadoop zookeeper pig->spark/flink

David.Duffield:

- 三次创业三次IPO成功: 坚持自己熟悉的领域 精准的技术眼光 创业者的眼界; 清楚认识自己, 什么擅长什么不擅长->怎么弥补->生生不息的奋斗精神
PeopleSoft 仁科:
- 股权vs投票权
- C/S架构->浏览器/服务器架构; HR 财务 大型制造商领域 供应链管理 客户关系管理
- 硅谷一般不会有敌意收购(恶意收购): 空壳->技术大牛都跑路; 收购要约
- 创始人眼光和技术洞察力; 商业上未曾犯过什么大错->没有经历生死存亡; 欠缺平台性和不可替代性; 创始人对商业和战略格局缺乏眼光->商业问题不一定非要通过技术手段解决/同资本共舞
WorkDay:
- SaaS模式 2005 vs 第一个aws服务S3存储 2006; 数据都存在内存里
- HR 财务 面向学生 面向HR招聘

RealNetworks:

- 压缩算法/流媒体/内容订阅 RM格式 收费对免费在哪个国家都会失败 iPod/YouTube
- 应对商业巨鳄: 产品是否具有不可替代性; 在自己更擅长的领域开展业务扩展战线; 抱上另一个大腿
- iPod的胜利是一个平台的胜利, 而战胜平台, 唯一的办法就是建设自己的平台

mongoDB:

- humongous
- 大概怀着伟大理想的人都会做出伟大的产品
- 数据库领域科班出身vs某些弊端深刻理解
- 特别注重宣传: 资助用户组/mongo大会/定位开发人员
- 先绑上大船, 再慢慢修理这艘船
- 用户体验: 产品非常非常好用, 万一出问题, 也有很好的技术支持
- 商业技术支持+商业版
- 安全门事件
- 基础架构类产品: 可靠性vs可用性(里子vs面子)
- azure - Cosmos DB

winRAR:

- 具有知识版权的非公开压缩算法: 格式支持; 40天后还可以用(吃瓜群众 被盗版->安全)

Tableau:

- 把公司的技术做到一定规模，然后再把这家公司卖掉
- 一家非常微软化的公司
- 自建数据引擎: 各种数据源清洗后导入
- 学术界vs工业界

周鸿祎:

- BAT
- 3721: C2C; 流氓软件之父; 战斗力+耐力
- 雅虎中国: 营收而非发展->短视
- 能够从一次声势浩大的战斗里面吸取教训，并在此基础上得到难以想

Hadoop:

- Cloudera: 三国魏, 历史总是惊人的相似, 但也只能到相似的程度了; 发行商, 类似Redhat; 数据仓库 Impala kudu
- MapR: 三国吴; 重写文件系统->HBase->kafka; Drill
- Hortonworks: 三国蜀; 价格战, 有钱的不缺那点钱, 没钱的希望更便宜
- aws-E-MpaReduct Azure-HDInsight

从0到1:

- 创业者->有价值而且很少人做(先发优势 是否适合创业->远见卓识); 投资人->投资潜力大而且没有被发现
- 历史就是这样的出其不意
- 严肃而保守->国家安全: 自由主义者和政治主张
- 言论自由&有钱人不断起诉
- Sun公司2000: 计算资源应该像水和电一样, 由公司提供, 客户按需消费 -> 等待时间

Redfin:

- 在地图上展示房源信息: 早于Google地图
- 盈利: 房产中介服务费3% vs 广告(数据才是真正赚钱的东西)

F5(龙卷风):

- 一招鲜之殇: 硬件负载均衡器 -> 软件定义网络

在线差旅报销Concur(史蒂夫 · 辛格):

- 转型: CD卖软件 -> 卖许可证(培训/定制/维护) -> 开发定制软件 -> SaaS
- 毕业前创业 -> 学位 -> 董事会
- 正现金流 -> 大规模提高正现金流依然保持收支平衡甚至盈利

企业转型:

- 百年老店IBM: 自动制表机 -> 大型计算机 -> 服务公司; 大数据->起了大早赶了晚集(官僚作风/对开源项目的保守态度 SystemML 眼光向来不错)
- 微软: window+office(os/app/IDE/DB等尝试后) -> 错失搜索/社交网络/移动互联网/手机 -> 云计算
- HP: 大型机/医疗器械/打印机 -> 拆分优质资产, 企业级到消费级 -> 计算机
- 领导人 + 旧业务有足够的现金流支撑到新业务造血(转型是找死, 不转型是等死) + 时机

Cray 超级计算机:

- 单一化的隐忧(一条腿走路): 晶体管->集成电路; 超算(非常非常小的市场)->PC
- 寻找第二条腿: 和第一条腿的互补性+第一条腿的独创性; 第二条腿往往在一个已经有竞争对手的市场里

Halo的开发者Bungie:

- 2000接受微软收购, 2007离开微软
- 卖身 收购: 一锤子买卖 人才收购(打散/独立业务) 独立运营

## 如何设计一个秒杀系统 2018-12-06 19:35:31

秒杀: 主要解决2个问题(并发读 并发写) 稳准快(高性能/一致性/高可用)
架构原则: 数据尽量少/请求尽量少/路径尽量短/依赖尽量少/不要有单点

动静分离:
动态数据: 数据是否和URL(唯一化)/浏览者(登录)/时间/地域相关, 是否含有cookie等私密数据(去掉)
改造: 结合上面的动态数据 ESI(edge side include)/CSI(client side include)
上CDN: 失效问题 命中率问题 发布更新问题 节点不要太多

热点数据 二八原则: 优化/限制/隔离(业务/系统/数据)
流量削峰: 排队(MQ) 答题(生成/推送/图片生成) 分层过滤(CDN->前台读->后台写->DB)
性能 QPS: CPU执行时间+线程等待时间(RPC IO-wait sleep wait); 线程数=2*CPU核数+1
优化: 减少编码 减少序列化 java极致优化(直接使用servlet 返回json) 并发读优化
减库存: 下单/付款/预扣(有效付款时间) 缓存vsDB 应用层排队vs数据层排队
plan B: 降级(系统性能vs用户体验) 限流(客户端vs服务器) 拒绝服务
缓存失效设计: 被动vs主动

架构是一种平衡术
![秒杀系统架构](<https://static001.geekbang.org/resource/image/50/65/5010fe68abebec4ed71e87147c0ee665.jpg>)
![高可用系统架构](https://static001.geekbang.org/resource/image/42/35/4225335357b6208a67410c36ea8a1535.jpg)

## 极客时间 - 持续交付 2018-12-06 16:06:45

主要组件(四大金刚): 配置管理/环境管理/构建集成/测试管理
灰度发布
移动App
开源红利
代码分支管理: 主干开发(Google/Facebook) git-flow(github/gitlab)
依赖管理: 工具自动化 环境一致性 代码更新必定更新版本号(commitID)
git代码回滚
2个披萨团队

环境:

- 开发/功能测试/验收测试(产品展示)/预发布(相同基础设施)/正式
- 公共(中间件/框架类/底层公共业务(账户/登录/基本信息))+泳道 统一配置
- 公司主流语言栈 统一镜像 配置模板 统一软件版本+更新方式 架构解决环境路由问题 自动化环境产生过程
- 标准化-规范(代码/依赖 命名 开发 配置 部署 安全 测试) 约定大于配置 自描述
- 配置vs配置管理 环境配置 运行时配置(配置中心-微服务)
- 用户访问入口管理 应用间调用链管理 数据层访问 环境创建/拆分

构建工具(maven)-构建检测(maven enforce)
CI: TravisCI CircleCI jenkinsCI(+k8s)
docker: 用容器来构建镜像(DooD DinD)
发布: deploy/release/rollout 把大象装进冰箱分几步 单机部署(易用/快速/稳定/容错性强/回滚顺滑) 集群部署(灰度->蓝绿/滚动/金丝雀
immutable: 任何变更都需要发布 黄金映像/VDI/PhoenixServer/IaaS

发布系统:

- 1 张页面展示发布信息
- 2 个按钮简化使用
- 3 种发布结果: 成功/失败/中断
- 4 类操作选择: 开始/停止/回退/重试
- 5 个发布步骤: markdown/download/install/verify/markup
- 6 大页面主要内容: 集群/实例/发布日志/发布历史/发布批次/发布操作

发布系统架构: group deployConfig deploy deployBatch deployTarget; 刹车机制(quick and dirty); 提升发布速度(下载/点火); 降级机制
单机单应用vs单机多应用 增量发布vs全量发布
监控保障发布质量: 用户侧(端/设备/唯一用户id)/网络/业务(核心业务指标)/应用(调用链/鹰眼)/系统; 监控30分钟; 一套完整的运维事件体系
静态代码检测工具: CI IDE集成
破坏性测试: 破坏点/整个系统 混沌工程(使用现实世界事件/在生产环境执行/自动化连续实现/)

CD测试难点:

- 测试数据准备和清理, 分布式系统的依赖, 测试用例高度仿真
- mock(测试用例解耦更快执行更快准备) -> 基于类/对象或微服务
- 回放: SLB/新增服务器

平台化:

- 确定模块及其范围: 代码管理 集成编译 环境管理 发布部署
- 学会做减法: 最重要/最紧急 减少纵向深度
- 标准先行
- 选择合适的驱动器: 中小团队-jenkins 复制情况下->人才是最好的驱动器
- 抽象公共能力: 账户与权限(单点登录/授权鉴权) 用户行为日志->任何行为都可被追溯 消息通知 安全与故障处理
- 统一用户入口
- 聚力而成

devops: 计算资源也是交付内容->云计算
数据: 用好的数据来衡量系统->故障时间/业务量; 大的故障和影响往往都出于一些非常愚蠢的失误; 数据驱动; 稳定性指标/性能相关指标/成熟度指标
移动app持续交付生命周期: 代码及依赖管理->组件化 项目信息管理->版本化 静态代码检查 构建管理 发布管理 运营管理 热修复
移动app交付流水线: 发布快车模式(并不是所有功能都放在最近的版本 固定发布间隔 不保证发布到用户侧)
提升app交付效率: 开发效率(方便拆分代码仓库->开发并行度 组件多版本->按需选取 专业分工-组织结构) 构建效率(扁平化依赖 二进制交付) 测试效率(代码静态扫描 UI自动化测试 自动monkey测试) 发布效率(分发的精准性/稳定性)
模拟: gitlab(代码管理) + jenkins(pipeline工作流) + ansible(自动化部署 vs chef/puppet/salt Tower) + k8s
测试环境: FAT-独立功能测试环境 FWS-稳定版本供其他团队联调 UAT-用户接受测试环境
数据库变更: 业务相关只能新增, 修改删除只能DBA操作

less is more, simple is better
越痛苦的事, 越要经常做: 比架构师懂得多 比开发人员动作快 比QA眼睛尖 比运营人员心脏大 比产品经理还会吹
